<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>UJA1169 Configuration Block</title>
        <link rel="stylesheet" type="text/css" href="../style.css">
    </head>
    <body>
        <div class="content">
            <!--Page-title-->
            <h1>UJA1169 Configuration Block</h1>
            <!--Page-description-->
            <p>This block allows the user to configure the SBC module.</p>
            <!--Library block image-->
            <h2>Block Image</h2>
            <img vspace="0" src="sbc_uja1169_config_files/sbc_config.jpg" width="400px" height="auto" />
            <!--Inputs-->
            <h2>Inputs:</h2>
            <ul>
                <li>None</li>
            </ul>
            <!--Outputs-->
            <h2>Outputs:</h2>
            <ul>
                <li>None</li>
            </ul>
            <!--Block-Dialog-Box-->
            <h2>Parameters and Dialog Box</h2>
            <p>The block dialog consists of the following tabs: </p>
            <ul>
                <li><a href="#general_tab">General</a></li>
                <li><a href="#regulator_tab">Regulator rate</a></li>
                <li><a href="#wdog_tab">Watchdog</a></li>
                <li><a href="#lock_tab">Lock</a></li>
				<li><a href="#can_tab">CAN</a></li>
                <li><a href="#events_det_tab">Events detection</a></li>
            </ul>
            <!--Table of contents-->
            <!--General tab-->
            <h4><a name="general_tab"></a>General</h4>

            <img vspace="10" src="sbc_uja1169_config_files/sbc_config_general.jpg" width="450px" height="auto" />

            <h3>Mode Control</h3>
            <p>Selects the SBC mode.</p>
			<li>Normal
				<p>In this mode, all the hardware on the device is available and can be activated. Voltage regulator V1 is enabled to supply the
				microcontroller.</p>
			</li>
			<li>Standby
				<p>Standby mode is the first-level power-saving mode of the UJA1169, offering reduced
				current consumption. The transceiver is unable to transmit or receive data in Standby
				mode. The SPI remains enabled and V1 is still active; the watchdog is active (in Timeout
				mode) if enabled. The behavior of V2/VEXT is determined by the SPI setting.</p>
			</li>
			<li>Sleep
				<p>Sleep mode is the second-level power-saving mode of the UJA1169. The difference
				between Sleep and Standby modes is that V1 is off in Sleep mode and temperature
				protection is inactive.</p>
			</li>
            <h3>Device model</h3>
            <p>There are 6 device models available for selection.</p>
			<h3> Limp Home Control</h3>
			<p>The dedicated LIMP pin can be used to enable so called ‘limp home’ hardware in the event of a serious ECU failure.
			Detectable failure conditions include SBC overtemperature events, loss of watchdog service, short-circuits on pins RSTN or V1 and user-initiated or
			external reset events. The LIMP pin is a battery-robust, active-LOW,open-drain output. The LIMP pin can also be forced LOW by setting bit LHC in the
			Fail-safe control register</p>

            <!--Regulator tab-->
            <h4><a name="regulator_tab"></a>Regulator</h4>

            <img vspace="15" src="sbc_uja1169_config_files/sbc_config_regulator.jpg" width="450px" height="auto"/>

            <h3>Power distribution control</h3>

            <li>higher value
				<p> V1 threshold current for activating the external PNP transistor, load current rising; Ith(act)PNP (higher value)
				V1 threshold current for deactivating the external PNP transistor, load current falling; Ith(deact)PNP (higher value)</p>
			</li>
             <li>lower value
				<p> V1 threshold current for activating the external PNP transistor; load current rising; Ith(act)PNP (lower value)
				V1 threshold current for deactivating the external PNP transistor; load current falling; Ith(deact)PNP (lower value)</p>
            </li>
            <h3>V2/VEXT configuration</h3>
			<li>V2C OFF : V2/VEXT off in all modes</li>
			<li>V2C Normal : V2/VEXT on in Normal mode</li>
			<li>V2C Normal, StandBy, Reset : V2/VEXT on in Normal, Standby and Reset modes</li>
			<li>V2C Normal, StandBy, Sleep, Reset : V2/VEXT on in Normal, Standby, Sleep and Reset modes</li>
            <p></p>
            <h3>V1 reset threshold (%)</h3>
            <p> Sets the V1 reset threshold.</p>
			<p></p>
            <!--Wdog tab-->
            <h4><a name="wdog_tab"></a>Watchdog</h4>
            <img vspace="15" src="sbc_uja1169_config_files/sbc_config_wdog.jpg" width="450px" height="auto"/>

            <h3>Mode control</h3>
            <p> The UJA1169  contains a watchdog that supports three operation modes: <p>
			<li>Window
			<p>It is available only in SBC Normal Mode. In this mode, a watchdog trigger  event within a defined watchdog window triggers and resets the watchdog timer.</p>
            </li>
			<li>Timeout
			<p>In this mode, the watchdog runs continuously and can be triggered and reset at any time within the watchdog period by a watchdog trigger. Watchdog time-out mode can be also used for cyclic wake-up of the microcontroller.<p>
            </li>
			<li>Autonomous
			<p> In Autonomous mode, the watchdog can be off or autonomously in Timeout mode, depending on the selected SBC mode.<p>
			</li>

			<h3>Nominal period </h3>
            <p>Available 8 periods selections in ms.</p>

			<p></p>
            <!--Lock tab-->
            <h4><a name="sbc_config_lock_tab"></a>Lock</h4>
            <img vspace="15" src="sbc_uja1169_config_files/sbc_config_lock.jpg" width="450px" height="auto"/>
            <p>Sections of the register address area can be write-protected to protect against unintended modifications. It only protects locked bits from being modified via the SPI and will not prevent the UJA1169 updating status registers.
			For each section, if the box is checked, SPI write access is disabled, otherwise SPI write access is enabled.</p>
			<li>Memory - lock control 0: address area 0x06 to 0x09.</li>
			<li>Regulator - lock control 1: address area 0x10 to 0x1F.</li>
			<li>Tranceiver - lock control 2: address area 0x20 to 0x2F.</li>
			<li>Unused 0x30 to 0x3F - lock control 3: address area 0x30 to 0x3F.</li>
			<li>Wake pin - lock control 4: address area 0x40 to 0x4F - WAKE pin control.</li>
			<li>Unused 0x50 to 0x5F - lock control 5: address area 0x50 to 0x5F.</li>
			<li>Data mask - lock control 6: address area 0x68 to 0x6F - data mask (/F versions only).</li>
			<p></p>
			<!--CAN tab-->
            <h4><a name="can_tab"></a>CAN</h4>

            <img vspace="15" src="sbc_uja1169_config_files/sbc_config_can.jpg" width="450px" height="auto"/>

            <h3>Mode</h3>
            <p>According to the device model selected, there are available one or more of the following selections:</p>
			<li> CAN FD Control
			<p> If checked, CAN FD tolerance is enabled, otherwise is disabled.</p>
			</li>
			<li> CAN partial networking configuration OK
			<p> If checked, partial networking registers configured successfully, otherwise partial networking register configuration is invalid (wake-up via standard wake-up pattern only)</p>
			</li>
			<li> CAN partial networking control
			<p> If checked, CAN selective wake-up is enabled.</p>
			</li>
			<li> CAN mode control 
			 <p> CAN can be set to offline-mode or Listen-only mode.</p>
			 </li>
			<p>Partial networking allows nodes in a CAN network to be selectively activated in response
to dedicated wake-up frames (WUF). Only nodes that are functionally required are active
on the bus while the other nodes remain in a low-power mode until needed. 
If both CAN wake-up (CWE = 1) and CAN selective wake-up (CPNC = 1) are enabled,
and the partial networking registers are configured correctly (PNCOK = 1), the transceiver
monitors the bus for dedicated CAN wake-up frames.<p>

            <h3>CAN data rate</h3>
            <p>Available data rate selections in kbit/s.</p>
            <h3>ID</h3>
            <p>ID registers, identifier format (0x27 to 0x2A).</p>
			<li>0x27: bits ID07 to ID00 of the extended frame format</li>
			<li>0x28: bits ID15 to ID08 of the extended frame format</li>
			<li>0x29: bits ID23 to ID18 of the extended frame format, bits ID05 to ID00 of the standard frame format/bits ID17 to ID16 of the extended frame format</li>
			<li>bits ID28 to ID24 of the extended frame format/ bits ID10 to ID06 of the standard frame format</li>
			<h3>ID mask </h3>
			<p> An ID mask can be defined to allow a group of identifiers to be recognized as valid by an individual node. The identifier mask is defined in the ID mask registers, where a 1 means 'don't care'.<p>

            <h3>Identifier format</h3>
            <li>11-bit (standard)</li>
			<li>29-bit (extended) </li>
            <p></p>
            <h3>Partial networking data mask</h3>
			<li>Don't care : data length code and data field are ‘don’t care’ for wake-up </li>
			<li>Evaluated: data length code and data field are evaluated at wake-up </li>
            <p></p>
            <h3>Data Length Code</h3>
            <p>Number of data bytes expected in a CAN frame.</p>

            <h3>Data mask</h3>
            <p>The data field indicates the nodes to be woken up.Within the data field, groups of nodes
            can be predefined and associated with bits in a data mask. By comparing the incoming
			data field with the data mask, multiple groups of nodes can be woken up simultaneously
			with a single wake-up message.</p>

            <h4><a name="events_det_tab"></a>Events detection</h4>

            <img vspace="10" src="sbc_uja1169_config_files/sbc_config_eventsDetection.jpg" width="450px" height="auto" />
			<p> The following events detection can be enabled:</p>
			<h3>Supply events</h3>
			<li>V2/VEXT overvoltage</li>
			<li>V2/VEXT undervoltage</li>
            <li>V1 undervoltage</li>
			<p></p>
			<h3>Transceiver events</h3>
			<li>CAN-bus silence</li>
			<li>CAN failure</li>
            <li>CAN wake-up</li>
			<p></p>
			<h3>System events</h3>
			<li>Overtemperature warning</li>
			<li>SPI failure</li>
			<p></p>
			<h3>Wake pin events</h3>
			<li>Rising-edge</li>
			<li>Falling-edge</li>
            <p></p>
            <div>* Read Hardware Manual documentation to get more information.</div>
            <p></p>
            <!--Block-Dependency-->
        <h2>Block Dependency</h2>
        <div>Please do the following:
            <ul>
                <li>Configure the <a href="../main_config/main_config.html">Target Configuration</a> block.</li>
                <li>Configure the <a href="../lpspi/lpspi_config.html">LPSPI Configuration</a> block.</li>
            </ul>
        </div>
            <!--Block-Miscellaneous-Details-->
            <h2>Block Miscellaneous Details</h2>
            <ul>
                <li>None</li>
            </ul>
        </div>
    </body>
</html>
